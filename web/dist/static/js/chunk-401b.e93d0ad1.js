(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-401b"],{"+aV0":function(e,t,a){"use strict";var l=a("xIZw");a.n(l).a},"5pIb":function(e,t,a){"use strict";a.d(t,"d",function(){return o}),a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return s});var l=a("t3Un");function o(e){return Object(l.a)({url:"/shop/Querylist",method:"get",params:e})}function n(e){return Object(l.a)({url:"shop/delete",method:"post",data:e})}function r(e){return Object(l.a)({url:"/shop/readOnlyShop",method:"get",params:{id:e}})}function s(e){return Object(l.a)({url:"shop/updateShop",method:"post",data:e})}},HziX:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});var l=function(){return"undefined"!=typeof window?window:e},o=function(){var e=l();return e&&e.tinymce?e.tinymce:null}}).call(this,a("yLpj"))},mRed:function(e,t,a){"use strict";var l=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],o=function(e){return-1!==l.indexOf(e)},n=function(e,t,a){var l=t.$props.value?t.$props.value:"",n=t.$props.initialValue?t.$props.initialValue:"";a.setContent(l||n),t.$listeners.input&&function(e,t){var a,l=e.$props.modelEvents?e.$props.modelEvents:null,o=Array.isArray(l)?l.join(" "):l;e.$watch("value",function(e,l){t&&"string"==typeof e&&e!==a&&e!==l&&(t.setContent(e),a=e)}),t.on(o||"change keyup undo redo",function(){a=t.getContent(),e.$emit("input",a)})}(t,a),function(e,t,a){Object.keys(t).filter(o).forEach(function(l){var o=t[l];"function"==typeof o&&("onInit"===l?o(e,a):a.on(l.substring(2),function(e){return o(e,a)}))})}(e,t.$listeners,a)},r=0,s=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++r+String(t)},i=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},u=a("HziX"),c={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean},p=Object.assign||function(e){for(var t,a=1,l=arguments.length;a<l;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d={listeners:[],scriptId:s("tiny-script"),scriptLoaded:!1},h=function(e){return function(){var t=p({},e.$props.init,{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:function(e,t){return i(e).concat(i(t))}(e.$props.init&&e.$props.init.plugins,e.$props.plugins),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",function(a){return n(a,e,t)}),e.$props.init&&"function"==typeof e.$props.init.setup&&e.$props.init.setup(t)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(e.element)&&(e.element.style.visibility=""),Object(u.a)().init(t)}},v={props:c,created:function(){this.elementId=this.$props.id||s("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(u.a)())h(this)();else if(this.element){var e=this.element.ownerDocument,t=this.$props.cloudChannel?this.$props.cloudChannel:"stable",a=this.$props.apiKey?this.$props.apiKey:"";!function(e,t,a,l){e.scriptLoaded?l():(e.listeners.push(l),t.getElementById(e.scriptId)||function(e,t,a,l){var o=t.createElement("script");o.type="application/javascript",o.id=e,o.addEventListener("load",l),o.src=a,t.head.appendChild(o)}(e.scriptId,t,a,function(){e.listeners.forEach(function(e){return e()}),e.scriptLoaded=!0}))}(d,e,"https://cloud.tinymce.com/"+t+"/tinymce.min.js?apiKey="+a,h(this))}},beforeDestroy:function(){null!==Object(u.a)()&&Object(u.a)().remove(this.editor)},render:function(e){return this.inlineEditor?function(e,t,a){return e(a||"div",{attrs:{id:t}})}(e,this.elementId,this.$props.tagName):function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})}(e,this.elementId)}};t.a=v},rs3x:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"c",function(){return n}),a.d(t,"b",function(){return r});var l=a("t3Un");a("vDqi");function o(e){return Object(l.a)({url:"/storage/create",method:"post",data:e})}var n="https://sandc.xyz:8889/wx/storage/upload",r="https://sandc.xyz:8889/wx/storage/fetch"},xAVR:function(e,t,a){"use strict";a.d(t,"d",function(){return o}),a.d(t,"c",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return i});var l=a("t3Un");function o(e){return Object(l.a)({url:"/category/list",method:"get",params:e})}function n(){return Object(l.a)({url:"/category/l1",method:"get"})}function r(e){return Object(l.a)({url:"/category/create",method:"post",data:e})}function s(e){return Object(l.a)({url:"/category/update",method:"post",data:e})}function i(e){return Object(l.a)({url:"/category/delete",method:"post",data:e})}},xIZw:function(e,t,a){},yqfi:function(e,t,a){"use strict";a.r(t);var l=a("5pIb"),o=a("xAVR"),n=a("rs3x"),r=(a("mRed"),a("XJYT")),s=a("X4fA"),i={name:"shopsEdit",data:function(){return{uploadPath:n.c,filePath:n.b,shop:{},checklist:[],checkindust:[],categoryIds:[],listQuery:{page:1,limit:1e3},industryClassify:[{value:"生活服务",label:"生活服务",children:[{value:"0",label:"旅行社"},{value:"1",label:"培训"},{value:"2",label:"宠物"},{value:"3",label:"齿科"},{value:"4",label:"快照"},{value:"5",label:"冲印"},{value:"6",label:"家政"},{value:"7",label:"婚纱摄影"},{value:"8",label:"婚庆服务"},{value:"9",label:"儿童摄影"},{value:"10",label:"汽车服务"},{value:"11",label:"丽人"},{value:"12",label:"更多生活服务"}]},{value:"购物",label:"购物",children:[{value:"0",label:"综合商场"},{value:"1",label:"食品茶酒"},{value:"2",label:"服饰鞋包"},{value:"3",label:"珠宝饰品"},{value:"4",label:"化妆品"},{value:"5",label:"运动户外"},{value:"6",label:"母婴儿童"},{value:"7",label:"数码家电"},{value:"8",label:"家具家居"},{value:"9",label:"书店"},{value:"10",label:"眼镜店"},{value:"11",label:"药店"},{value:"12",label:"超市"},{value:"13",label:"便利店"},{value:"14",label:"其他"}]},{value:"运动健身",label:"运动健身",children:[{value:"0",label:"健身中心"},{value:"1",label:"游泳馆"},{value:"2",label:"羽毛球馆"},{value:"3",label:"瑜伽"},{value:"4",label:"舞蹈"},{value:"5",label:"篮球场"},{value:"6",label:"网球场"},{value:"7",label:"足球场"},{value:"8",label:"高尔夫场"},{value:"9",label:"保龄球馆"},{value:"10",label:"乒乓球馆"},{value:"11",label:"体育场馆"},{value:"12",label:"更多运动场馆"}]},{value:"运动健身",label:"运动健身",children:[{value:"0",label:"川菜"},{value:"1",label:"粤菜"},{value:"2",label:"茶馆"},{value:"3",label:"火锅"},{value:"4",label:"烧烤"},{value:"5",label:"海鲜"},{value:"6",label:"特色小吃"},{value:"7",label:"日韩料理"},{value:"8",label:"西餐"},{value:"9",label:"自助餐"},{value:"10",label:"东南亚菜"},{value:"11",label:"面包甜点"},{value:"12",label:"其他"}]},{value:"休闲娱乐",label:"休闲娱乐",children:[{value:"0",label:"咖啡厅"},{value:"1",label:"酒吧"},{value:"2",label:"茶馆"},{value:"3",label:"KTV"},{value:"4",label:"电影院"},{value:"5",label:"文化艺术"},{value:"6",label:"景点、郊游"},{value:"7",label:"公园"},{value:"8",label:"足疗按摩"},{value:"9",label:"洗浴"},{value:"10",label:"游乐游艺"},{value:"11",label:"台球馆"},{value:"12",label:"桌面游戏"},{value:"13",label:"更多休闲娱乐"}]},{value:"服装",label:"服装",children:[{value:"0",label:"女装"},{value:"1",label:"男装"}]}]}},computed:{headers:function(){return{"X-Litemall-Admin-Token":Object(s.a)()}}},created:function(){this.init(),this.getAllCategoryList()},methods:{init:function(){var e=this;if(null!=this.$route.query.id){var t=this.$route.query.id;Object(l.b)(t).then(function(t){e.shop=t.data.data,e.categoryIds=t.data.data.industryClassify,console.log(e.categoryIds),console.log(e.industryClassify[e.categoryIds[0]].label),console.log(e.industryClassify[e.categoryIds[0]].children[0].label)})}},getAllCategoryList:function(){var e=this;Object(o.d)(this.listQuery).then(function(t){if(0==t.data.errno){console.log(t.data.data.items,714);var a=t.data.data.items,l=a.length;e.industryClassify.length=0;var o;o=a.filter(function(e){return 0==e.pid});for(var n=0;n<o.length;n++)e.industryClassify.push({value:o[n].id,label:o[n].name,children:[]});for(var r=0;r<l;r++)for(n=0;n<e.industryClassify.length;n++)a[r].pid==e.industryClassify[n].value&&e.industryClassify[n].children.push({value:a[r].id,label:a[r].name})}}).catch(function(t){e.$notify.error({title:"失败",message:t.data.errmsg})})},handleCancel:function(){this.$router.push({path:"/shopmanage/shoplist"})},handleEdit:function(){var e=this,t=this.shop;console.log(t,999),Object(l.c)(t).then(function(t){e.$notify.success({title:"成功",message:"创建成功"})}).catch(function(e){r.MessageBox.alert("业务错误："+e.data,"警告",{confirmButtonText:"确定",type:"error"})})},handleClose:function(e){this.keywords.splice(this.keywords.indexOf(e),1),this.goods.keywords=this.keywords.toString()},uploadPicUrla:function(e){this.shop.url=e.data.url.replace("http://localhost:8080/wx/storage/fetch",this.filePath)},uploadPicUrlb:function(e){this.shop.workimgUrl=e.data.url.replace("http://localhost:8080/wx/storage/fetch",this.filePath)},uploadPicUrlc:function(e){this.shop.storefrontimgUrl=e.data.url.replace("http://localhost:8080/wx/storage/fetch",this.filePath)},uploadPicUrld:function(e){this.shop.avatar=e.data.url.replace("http://localhost:8080/wx/storage/fetch",this.filePath)},uploadOverrun:function(){this.$message({type:"error",message:"上传文件个数超出限制!最多上传5张图片!"})},handleGalleryUrl:function(e,t,a){0===e.errno&&this.goods.gallery.push(e.data.url)},handleRemove:function(e,t){for(var a=0;a<this.goods.gallery.length;a++){var l;l=void 0===e.response?e.url:e.response.data.url,this.goods.gallery[a]===l&&this.goods.gallery.splice(a,1)}},handleCategoryChange:function(e){this.shop.industryClassify=e,console.log(e,4444)},specChanged:function(e){!1===e?(this.specifications=[{specification:"规格",value:"标准",picUrl:""}],this.products=[{id:0,specifications:["标准"],price:0,number:0,url:""}]):(this.specifications=[],this.products=[])},uploadSpecPicUrl:function(e){this.specForm.picUrl=e.data.url}}},u=(a("+aV0"),a("KHd+")),c=Object(u.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("h3",[e._v("商家编辑")]),e._v(" "),a("el-form",{attrs:{model:e.shop,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"行业分类"}},[a("el-cascader",{attrs:{options:e.industryClassify,"expand-trigger":"hover",placeholder:"请选择行业类别"},on:{change:e.handleCategoryChange},model:{value:e.categoryIds,callback:function(t){e.categoryIds=t},expression:"categoryIds"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域",prop:"region"}},[a("el-input",{model:{value:e.shop.region,callback:function(t){e.$set(e.shop,"region",t)},expression:"shop.region"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{model:{value:e.shop.address,callback:function(t){e.$set(e.shop,"address",t)},expression:"shop.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"logo"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrla,accept:".jpg,.jpeg,.png,.gif"}},[e.shop.url?a("img",{staticClass:"avatar",attrs:{src:e.shop.url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺名称",prop:"shopname"}},[a("el-input",{model:{value:e.shop.shopname,callback:function(t){e.$set(e.shop,"shopname",t)},expression:"shop.shopname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人名字",prop:"username"}},[a("el-input",{model:{value:e.shop.username,callback:function(t){e.$set(e.shop,"username",t)},expression:"shop.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"门店介绍",prop:"shopIntroduce"}},[a("el-input",{model:{value:e.shop.shopIntroduce,callback:function(t){e.$set(e.shop,"shopIntroduce",t)},expression:"shop.shopIntroduce"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客服电话",prop:"serviceMobile"}},[a("el-input",{model:{value:e.shop.serviceMobile,callback:function(t){e.$set(e.shop,"serviceMobile",t)},expression:"shop.serviceMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业时间",prop:"workTime"}},[a("el-input",{model:{value:e.shop.workTime,callback:function(t){e.$set(e.shop,"workTime",t)},expression:"shop.workTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入驻资质"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrlb,accept:".jpg,.jpeg,.png,.gif"}},[e.shop.workimgUrl?a("img",{staticClass:"avatar",attrs:{src:e.shop.workimgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"门头图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrlc,accept:".jpg,.jpeg,.png,.gif"}},[e.shop.storefrontimgUrl?a("img",{staticClass:"avatar",attrs:{src:e.shop.storefrontimgUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码至少6位数"},model:{value:e.shop.password,callback:function(t){e.$set(e.shop,"password",t)},expression:"shop.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrld,accept:".jpg,.jpeg,.png,.gif"}},[e.shop.avatar?a("img",{staticClass:"avatar",attrs:{src:e.shop.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"op-container"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("保存")])],1)],1)],1)},[],!1,null,"9a4a5c8c",null);c.options.__file="edit.vue";t.default=c.exports}}]);